<script lang="ts" setup>
import { ref } from 'vue'
const Messages = ref([
  {
    title: '2023起始篇',
    time: '2023-12-14',
    msg: `七七,你好~! 
                <br>这天是我加到你好友的第一天,我很晚才下班,走到路上的时候你发过来一条关心我的消息,我人愣住了,还是第一次有人关心我.
                <br>过了一会儿你说要不要和你打电话,我感到有点意外,第一次有女孩子对我这么主动.
                <br>我们聊了很久,聊到了很多,没有话题的时候你总能找到新的话题,把这个天聊下去.
                <br>头一次有女孩子陪我聊天到这么晚,而且通过聊天我对你很有感觉,我觉得你一定是个好女孩.
               `,
  },
  {
    title: '2023表白篇',
    time: '2023-12-19',
    msg: `七七, 我喜欢你~! 
                <br>我们频繁的聊天加打电话,让我更加确信我很喜欢你,于是晚上我鼓起勇气向你表白.
                <br>你同意了,那一刻我心跳得贼快,你要是把耳朵贴在我心脏的位置一定能听到.
                <br>我们几乎每天晚上都打电话,有时打着打着就睡着了,听着你的声音就能让我很安心.
               `,
  },
  {
    title: '2023奔现篇',
    time: '2023-12-30',
    msg: `七七, 我来见你了~! 
                <br>某天晚上打电话的时候,我问了你一句,说:'你想见我嘛?',你回答:'想'.
                <br>其实我早就想见你了,只是在给自己找个见你的理由,你想见我,那我就来了.
                <br>我提前请好假,坐了20个小时的火车,跑去了你生活的地方.
                <br>我们约在电影院门口见面,见到你的时候我心跳得特别快,差点忘记了说话.
                <br>当时我不知道你是怎么看我的,觉得我怎么样,我好怕你见到我就直接走了(来之前还特地去做了个头发,虽然我自己都不太满意).
                <br>电影院里我问你手冷不冷(其实就是想牵你的手),你就把手递过来了,我紧紧的握住你的手,直到电影结束.
                <br>然后你带着我到处溜达,去了地下街,去了姚庄,然后你回了店里上班,我去帮你拿回了你找不到的快递,然后去店里坐那儿玩手机偷偷看你.
                <br>还没到饭点,你就给我点了吃的,发消息让我去拿,我猜应该是怕等会儿太忙了就顾不到我了.
                <br>虽然我不是很饿,但是没一会儿功夫我就吃完了,很好吃,之后又继续看着你忙碌的身影,结果睡着了(实在是太困了,想着马上见面了很紧张,又是在火车上根本睡不着).
                <br>我怕影响到其他人就把快递给你,然后就匆匆找了个宾馆去补觉了,大约两个小时之后我醒了,然后跑去洗了个澡,等你下班.
                <br>你和我说你手弄破了,我好心疼,12点下班我怕买不到创口贴,我10点就出门了,找了家药店,买了创口贴,在你们店对面的烧烤店里坐着等你下班.
                <br>你下班之后我们一起走到了宾馆门口,你想上去看看却被前台拦住了,然后就没上去.
                <br>之后我们一起逛去了夜市,然后找了一个公交站台坐着,聊了会儿天,我就静静地看着你.
                <br>很晚了我送你回家,在菜市口,我抱住你了,趁你没反应过来,我亲了你额头一下(当时心跳贼快,怕你推开我).
                <br>你回家,我会宾馆之后,又打了电话,你说刚刚你没有反应过来,真是太可爱了.
               `,
  },
  {
    title: '2023跨年篇',
    time: '2023-12-31',
    msg: `七七, 我们一起跨年~! 
                <br>这天,你早班,本来决定中午再过去吃午饭的,但是没忍住,就想看你,10点多就过去了,点了一点吃的.
                <br>又坐了会儿,快到中午的时候,给你发完消息,我就偷偷出去了,去大象山看了电影,逛了公园打发时间.
                <br>就挺巧的,在你吃午饭的时候我正好在店门口,就偷偷拍下来了,发给你,你说不好看,让我删(我一直没删).
                <br>我看店里挺多人的,我就没进去,去附近的网吧坐了会儿,然后等人不多的时候我就又去店里坐着了(偷偷看你).
                <br>下班之后我们在地下街碰面,我们坐在一起,你靠在我怀里休息,那一刻我感觉我很幸福.
                <br>坐了好久,我们决定去找家你以前吃过的店,但是没找到,就进了另外一家,点了你爱吃的虾.
                <br>因为电的原因,我们等了好久才上菜,我给你剥虾,然后喂给你吃,看着你吃饭的样子(真可爱).
                <br>然后我们去电影院,准备在电影院跨年,途中你问我是什么感觉,我用嘴唇回应了你(心跳贼快,你应该感觉到了).
                <br>出电影院之后我们一起走到了菜市口,一想到明天就要走了,我紧紧的抱住了你,你回应我了,也抱住了我,我忍不住就又亲上去了(可能有点没有顾及你的感受,但是确实没忍住).
                <br>许久之后,你回家了,我就近找了家宾馆,晚上也是打着电话入睡的,早上我打电话喊你起床,想见你(但是又怕你伤心),没见到(有一点点难过,但挺好,不然真舍不得).
                <br>就这样我踏上了回家的火车.
               `,
  },
])
const showText = (index: any) => {
  const textHeight = document.getElementsByClassName(`text${index}`)[0].clientHeight
  const collBoxIndex: any = document.getElementsByClassName(`collBox${index}`)[0]
  const iconIndex: any = document.getElementsByClassName(`icon${index}`)[0]
  if (collBoxIndex.classList.contains('isActive')) {
    collBoxIndex.classList.remove('isActive')
    collBoxIndex.style.height = `${12 * 0.25 * 16}px`
    iconIndex.style.transform = 'rotate(0deg)'
  } else {
    collBoxIndex.classList.add('isActive')
    collBoxIndex.style.height = `${18 * 0.25 * 16 + textHeight}px`
    iconIndex.style.transform = 'rotate(90deg)'
  }
}
</script>

<template>
  <div class="demo-collapse">
    <div v-for="(item, index) in Messages" :key="index" class="collBox" :class="`collBox${index}`">
      <div class="title cursor-pointer" @click="showText(index)">
        <span>{{ item.title }}</span>
        <span flex items-center
          >{{ item.time }}
          <div class="i-carbon:chevron-right ml-4 iconRight" :class="`icon${index}`" />
        </span>
      </div>
      <div class="px-12 py-4 text-left lh-8" :class="`text${index}`" v-html="item.msg" />
    </div>
  </div>
</template>

<style scoped lang="less">
.demo-collapse {
  width: 100%;

  .collBox {
    height: 48px;
    overflow: hidden;
    transition: all 0.5s;

    .title {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      border-bottom: 1px solid #e6e6e6;

      .iconRight {
        transition: all 0.5s;
      }
    }

    p {
      text-align: center;
      transition: all 0.5s;
    }

    .hid {
      display: none;
    }
  }

  .msg {
    line-height: 30px;
  }

  .time {
    flex: 1;
    text-align: right;
    margin-right: 1rem;
  }

  /deep/.el-collapse-item__header {
    background: transparent;
  }

  /deep/.el-collapse-item__wrap {
    background: transparent;
  }
}
</style>
