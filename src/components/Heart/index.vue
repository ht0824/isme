<script lang="ts" setup>
import { ref } from 'vue'
const Messages = ref([
  {
    title: '2023起始',
    time: '2023-12-14',
    msg: `七七,你好~! 
                <br>这天是我加到你好友的第一天,我很晚才下班,走到路上的时候你发过来一条关心我的消息,我人愣住了,还是第一次有人关心我.
                <br>过了一会儿你说要不要和你打电话,我感到有点意外,第一次有女孩子对我这么主动.
                <br>我们聊了很久,聊到了很多,没有话题的时候你总能找到新的话题,把这个天聊下去.
                <br>头一次有女孩子陪我聊天到这么晚,而且通过聊天我对你很有感觉,我觉得你一定是个好女孩.
               `,
  },
  {
    title: '2023表白',
    time: '2023-12-19',
    msg: `七七, 我喜欢你~! 
                <br>我们频繁的聊天加打电话,让我更加确信我很喜欢你,于是晚上我鼓起勇气向你表白.
                <br>你同意了,那一刻我心跳得贼快,你要是把耳朵贴在我心脏的位置一定能听到.
                <br>我们几乎每天晚上都打电话,有时打着打着就睡着了,听着你的声音就能让我很安心.
               `,
  },
  {
    title: '2023奔现',
    time: '2023-12-30',
    msg: `七七, 我来见你了~! 
                <br>某天晚上打电话的时候,我问了你一句,说:'你想见我嘛?',你回答:'想'.
                <br>其实我早就想见你了,只是在给自己找个见你的理由,你想见我,那我就来了.
                <br>我提前请好假,坐了20个小时的火车,跑去了你生活的地方.
                <br>我们约在电影院门口见面,见到你的时候我心跳得特别快,差点忘记了说话.
                <br>当时我不知道你是怎么看我的,觉得我怎么样,我好怕你见到我就直接走了(来之前还特地去做了个头发,虽然我自己都不太满意).
                <br>电影院里我问你手冷不冷(其实就是想牵你的手),你就把手递过来了,我紧紧的握住你的手,直到电影结束.
                <br>然后你带着我到处溜达,去了地下街,去了姚庄,然后你回了店里上班,我去帮你拿回了你找不到的快递,然后去店里坐那儿玩手机偷偷看你.
                <br>还没到饭点,你就给我点了吃的,发消息让我去拿,我猜应该是怕等会儿太忙了就顾不到我了.
                <br>虽然我不是很饿,但是没一会儿功夫我就吃完了,很好吃,之后又继续看着你忙碌的身影,结果睡着了(实在是太困了,想着马上见面了很紧张,又是在火车上根本睡不着).
                <br>我怕影响到其他人就把快递给你,然后就匆匆找了个宾馆去补觉了,大约两个小时之后我醒了,然后跑去洗了个澡,等你下班.
                <br>你和我说你手弄破了,我好心疼,12点下班我怕买不到创口贴,我10点就出门了,找了家药店,买了创口贴,在你们店对面的烧烤店里坐着等你下班.
                <br>你下班之后我们一起走到了宾馆门口,你想上去看看却被前台拦住了,然后就没上去.
                <br>之后我们一起逛去了夜市,然后找了一个公交站台坐着,聊了会儿天,我就静静地看着你.
                <br>很晚了我送你回家,在菜市口,我抱住你了,趁你没反应过来,我亲了你额头一下(当时心跳贼快,怕你推开我).
                <br>你回家,我会宾馆之后,又打了电话,你说刚刚你没有反应过来,真是太可爱了.
               `,
  },
  {
    title: '2023跨年',
    time: '2023-12-31',
    msg: `七七, 我们一起跨年~! 
                <br>这天,你早班,本来决定中午再过去吃午饭的,但是没忍住,就想看你,10点多就过去了,点了一点吃的.
                <br>又坐了会儿,快到中午的时候,给你发完消息,我就偷偷出去了,去大象山看了电影,逛了公园打发时间.
                <br>就挺巧的,在你吃午饭的时候我正好在店门口,就偷偷拍下来了,发给你,你说不好看,让我删(我一直没删).
                <br>我看店里挺多人的,我就没进去,去附近的网吧坐了会儿,然后等人不多的时候我就又去店里坐着了(偷偷看你).
                <br>下班之后我们在地下街碰面,我们坐在一起,你靠在我怀里休息,那一刻我感觉我很幸福.
                <br>坐了好久,我们决定去找家你以前吃过的店,但是没找到,就进了另外一家,点了你爱吃的虾.
                <br>因为电的原因,我们等了好久才上菜,我给你剥虾,然后喂给你吃,看着你吃饭的样子(真可爱).
                <br>然后我们去电影院,准备在电影院跨年,途中你问我是什么感觉,我用嘴唇回应了你(心跳贼快,你应该感觉到了).
                <br>出电影院之后我们一起走到了菜市口,一想到明天就要走了,我紧紧的抱住了你,你回应我了,也抱住了我,我忍不住就又亲上去了(可能有点没有顾及你的感受,但是确实没忍住).
                <br>许久之后,你回家了,我就近找了家宾馆,晚上也是打着电话入睡的,早上我打电话喊你起床,想见你(但是又怕你伤心),没见到(有一点点难过,但挺好,不然真舍不得).
                <br>就这样我踏上了回家的火车.
               `,
  },
  {
    title: '2024一月五日',
    time: '2024-01-05',
    msg: `七七,我来接你啦~ 
                <br>前一天你说你要来,我以为你开玩笑的,但是我又特别期待,那一晚上估计都是笑着的.
                <br>你真的买了来见我的机票,这是你第一次一个人出远门,我很担心你会找不到路,整天提心吊胆的,还好宝宝聪慧过人,安全抵达.
                <br>那天我早早的就出发去了机场,怕走晚了路上堵车,不能第一时间接到你.
                <br>我拿着鲜花上了接机口,在哪儿等着你出来,刚看到你回个消息的时间你就不见了,你让我回头,我回头发现你在我身后.
                <br>我跑过去抱住了你,那一刻我好开心,我好幸福.
                <br>我牵着你的手带去去停车场,车里我提前准备好了情侣戒指还有零食.
                <br>我又一次向你表白了,你又同意了,我忍不住亲了你一口,随后我开车带你回到了我的住处.
                <br>那一晚我们聊了很久,互相带上了情侣戒指,给你暖了被窝,我们真正的相拥而睡了.
                <br>那是我至今睡得最香的一天.
               `,
  },
  {
    title: '2024一月六日',
    time: '2024-01-06',
    msg: `七七,我带你去玩吧~ 
                <br>周六带你逛了光谷步行街,吃了一盏灯(是真的辣),吃了李炮麻辣烫(这个是真的不错).
                <br>周末差点睡过头,我们急匆匆开车赶回我老家去参加别人的婚礼.
                <br>婚礼规格还是很不错的,司仪很专业,饭菜也很可口,喜糖也很豪华.
                <br>最最最主要的是,我爷爷奶奶,爸爸妈妈,大伯,还有村里人有好多人都知道我带着你回家了.
                <br>这件事一定很快就会在邻里传开,说我带女朋友回家了,虽然我们吃完饭就走了,但是我麻麻还是准备了红包(不知道会不会有点少).
                <br>下午我们去中央大公园逛了一圈,在湖边的石凳上互相依靠着晒太阳了,真的想以后也能经常这样,真是太幸福了.
                <br>傍晚我们开车回光谷了,你在车上睡得很沉,我不忍心喊你,我车开得很慢想让你多睡一会儿,即使到了楼下车停好了,过了很久车里不暖和了,怕你着凉,就喊你起来上楼了.
                <br>之后一周白天我上班,晚上带你去吃好吃的,中午回去给你带好吃的,每天都是迫不及待的下班回家,因为家里有你.
                <br>我们去创业街吃了情侣开的麻辣烫,碗是粉色的,味道也还不错,吃了学校门口奶奶卖的烤肠和丸子.
                <br>吃了鲍师傅家的泡芙,蛋挞,和肉松小贝,吃了步行街的螺蛳粉/生蚝/薯塔/烤面筋,又去吃了一次李炮麻辣烫,
                <br>这一周感觉像梦一样,有你在身边的感觉真的很不一样,每天都是笑着的,特别开心.
               `,
  },
  {
    title: '2024一月十二日',
    time: '2024-01-12',
    msg: `七七,走回家去蹭饭~ 
                <br>我提前和麻麻说了我们晚上回去吃饭,晚上一下班,我们就开车回去了,麻麻准备了一桌子菜(不知道你喜欢吃什么).
                <br>当晚留在家过夜了,周六快到中午我们才起床,中午麻麻不在,爸爸给我们煮了火锅(不知道你喜不喜欢这种火锅).
                <br>吃过饭我们就准备去买烟花,我周五晚上就提前联系好了卖烟花的(武汉禁烟花一般地方没得卖),途中接到奶奶的电话,让我去把爷爷接回家(正好顺路).
                <br>我们顺利的买到了烟花,天还没黑,之前你说过想去江汉路,我带你去了江汉路,逛了小吃街(吃了翅包饭),看了中国黄金(显眼包).
                <br>逛了happy站台,抽了盲盒,吃了舌尖大师(点的多了一点没吃完),想给你做个美甲的,没做成.
                <br>然后我们去了汉口江滩,看了江景和灯光秀(好像确实不咋样,但是有点在,就很不一样),走了一圈找了个凳子依靠在一起坐着(很幸福).
                <br>许久之后我们开车回到了光谷拿了快递,出发去了可以放烟花的地方,烟花很好看(没你好看).
                <br>放完烟花我们就回到住处了,你麻麻让你回去,虽然我舍不得你走,但是我也不能说什么,那一晚我没怎么说话,忍住不哭.
                <br>第二天一早你就得走,我开车送你去的机场,我怕我舍不得你走,看你走远了我就下楼去停车场了,再车上坐了许久,收到你过了安检的消息我才缓缓的准备开车回家.
                <br>回到家,床上还有你的气息,却没有你的身影了,我久久不能释怀,躺在你睡过的地方,抱着你枕过的枕头,闻着你的味道.
                <br>我好想你,我好想你,我好想你,我好想你,我好想你,我好想你,我好想你.
                <br>你来得很突然,离开得也很突然,我想陪你去拍写真的,陪你去选照片的,想带你逛武汉很多地方,我们都不喜欢这种分开的感觉.
                <br>再等等,过年我去找你!
               `,
  },
])
const showText = (index: any) => {
  const textHeight = document.getElementsByClassName(`text${index}`)[0].clientHeight
  const collBoxIndex: any = document.getElementsByClassName(`collBox${index}`)[0]
  const iconIndex: any = document.getElementsByClassName(`icon${index}`)[0]
  if (collBoxIndex.classList.contains('isActive')) {
    collBoxIndex.classList.remove('isActive')
    collBoxIndex.style.height = `${12 * 0.25 * 16}px`
    iconIndex.style.transform = 'rotate(0deg)'
  }
  else {
    collBoxIndex.classList.add('isActive')
    collBoxIndex.style.height = `${18 * 0.25 * 16 + textHeight}px`
    iconIndex.style.transform = 'rotate(90deg)'
  }
}
</script>

<template>
  <div class="demo-collapse">
    <div v-for="(item, index) in Messages" :key="index" class="collBox" :class="`collBox${index}`">
      <div class="title cursor-pointer" @click="showText(index)">
        <span>{{ item.title }}</span>
        <span flex items-center>{{ item.time }}
          <div class="i-carbon:chevron-right ml-4 iconRight" :class="`icon${index}`" />
        </span>
      </div>
      <div class="px-8 py-4 text-left lh-8" :class="`text${index}`" v-html="item.msg" />
    </div>
  </div>
</template>

<style scoped lang="less">
.demo-collapse {
  width: 100%;

  .collBox {
    height: 48px;
    overflow: hidden;
    transition: all 0.5s;

    .title {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      border-bottom: 1px solid #e6e6e6;

      .iconRight {
        transition: all 0.5s;
      }
    }

    p {
      text-align: center;
      transition: all 0.5s;
    }

    .hid {
      display: none;
    }
  }

  .msg {
    line-height: 30px;
  }

  .time {
    flex: 1;
    text-align: right;
    margin-right: 1rem;
  }

  /deep/.el-collapse-item__header {
    background: transparent;
  }

  /deep/.el-collapse-item__wrap {
    background: transparent;
  }
}
</style>
